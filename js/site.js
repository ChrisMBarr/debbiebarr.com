(()=>{const S=document.querySelector("body"),L=document.querySelector("#toggle-sidebar"),v=document.querySelector("#sidebar"),$=document.querySelector("#close-sidebar"),y=Array.from(document.querySelectorAll("#sidebar a, #sidebar button")),k=document.querySelector("#sidebar-backdrop"),f=location.pathname.toLowerCase().trim();y.forEach(e=>e.tabIndex=-1);let n=!1;function m(){S.classList.toggle("sidebar-open",n),n?v.focus():document.activeElement.blur(),y.forEach(e=>e.tabIndex=n?0:-1)}function p(e){e.preventDefault(),n=!1,m()}if(document.body.addEventListener("keyup",e=>{n&&e.key==="Escape"&&(n=!1,m())},!1),L.addEventListener("click",e=>{e.preventDefault(),n=!n,m()},!1),$.addEventListener("click",p,!1),k.addEventListener("click",p,!1),k.addEventListener("touchstart",p,!1),!f.includes("books-for-caregivers")&&/\/books\/.+$/i.test(f)){const g=document.querySelector("#book-details-wrapper"),s=document.querySelector("#book-details-titles"),h=document.querySelector("#book-details-links"),a=document.querySelector("#book-details-content > .sub-navigation"),l=a.querySelectorAll("a"),d=()=>{const c=300-(parseInt(getComputedStyle(g).paddingTop,10)+s.offsetHeight);h.style.marginTop=`${c}px`},u=()=>{a.style.setProperty("--book-details-subnav-bg-height",`${a.clientHeight}px`)};let i=null;window.addEventListener("resize",()=>{clearTimeout(i),i=setTimeout(()=>{d(),u()},250)}),d(),u();const t=(o,r)=>{l.forEach(b=>{b.classList.remove("current"),document.querySelector(b.getAttribute("href")).classList.add("d-none")}),o.classList.add("current");const c=document.querySelector(o.getAttribute("href"));c.classList.remove("d-none"),r&&c.focus()};if(location.hash!=""){const o=a.querySelector(`[href$="${location.hash.replace("#","")}"]`);t(o,!1)}l.forEach(o=>{o.addEventListener("click",r=>{r.preventDefault(),t(o,!0),history.replaceState(void 0,void 0,o.getAttribute("href"))})})}else if(f.includes("/contact")){const e=document.querySelector("#contact-form"),g=e.querySelectorAll("input,textarea"),s=document.querySelector("#form-status"),h="text-success",a="text-danger",l="Thanks for your note. Debbie will respond to you soon.",d="Oops! There was a problem submitting your message, try again later!";e.addEventListener("submit",async function(t){if(t.preventDefault(),t.stopPropagation(),e.classList.add("was-validated"),e.checkValidity()){const o=new FormData(t.target);fetch(t.target.action,{method:e.method,body:o,headers:{Accept:"application/json"}}).then(r=>{r.ok?u():r.json().then(c=>{Object.hasOwn(c,"errors")?(s.classList.add(a),s.innerHTML=c.errors.map(b=>b.message).join(", ")):i(c)})}).catch(r=>i(r))}});const u=()=>{s.innerHTML=l,s.classList.remove(a),s.classList.add(h),g.forEach(t=>{t.setAttribute("readonly",""),t.classList.add("is-valid")}),e.querySelector("button").disabled=!0},i=t=>{s.classList.add(a),s.innerHTML=d,console.error(t)}}})();
