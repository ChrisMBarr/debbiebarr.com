(()=>{const L=document.querySelector("body"),v=document.querySelector("#toggle-sidebar"),$=document.querySelector("#sidebar"),q=document.querySelector("#close-sidebar"),y=Array.from(document.querySelectorAll("#sidebar a, #sidebar button")),k=document.querySelector("#sidebar-backdrop"),m=location.pathname.toLowerCase().trim();y.forEach(e=>e.tabIndex=-1);let r=!1;function p(){L.classList.toggle("sidebar-open",r),r?$.focus():document.activeElement.blur(),y.forEach(e=>e.tabIndex=r?0:-1)}function g(e){e.preventDefault(),r=!1,p()}if(document.body.addEventListener("keyup",e=>{r&&e.key==="Escape"&&(r=!1,p())},!1),v.addEventListener("click",e=>{e.preventDefault(),r=!r,p()},!1),q.addEventListener("click",g,!1),k.addEventListener("click",g,!1),k.addEventListener("touchstart",g,!1),!m.includes("books-for-caregivers")&&/\/books\/.+$/i.test(m)){const d="book-",s=document.querySelector("#book-details-wrapper"),h=document.querySelector("#book-details-titles"),i=document.querySelector("#book-details-links"),a=document.querySelector("#book-details-content > .sub-navigation"),u=a.querySelectorAll("a"),b=()=>{const c=300-(parseInt(getComputedStyle(s).paddingTop,10)+h.offsetHeight);i.style.marginTop=`${c}px`},l=()=>{a.style.setProperty("--book-details-subnav-bg-height",`${a.clientHeight}px`)};let o=null;window.addEventListener("resize",()=>{clearTimeout(o),o=setTimeout(()=>{b(),l()},250)}),b(),l();const f=(t,n)=>{u.forEach(S=>{S.classList.remove("current"),document.querySelector(S.getAttribute("href")).classList.add("d-none")}),t.classList.add("current");const c=document.querySelector(t.getAttribute("href"));c.classList.remove("d-none"),n&&c.focus()};if(location.hash!=""){const t=a.querySelector(`[href="#${d}${location.hash.replace("#","")}"]`);f(t,!1)}u.forEach(t=>{t.addEventListener("click",n=>{n.preventDefault(),f(t,!0),history.replaceState(void 0,void 0,t.getAttribute("href").replace(d,""))})})}else if(m.includes("/contact")){const e=document.querySelector("#contact-form"),d=e.querySelectorAll("input,textarea"),s=document.querySelector("#form-status"),h="text-success",i="text-danger",a="Thanks for your note. Debbie will respond to you soon.",u="Oops! There was a problem submitting your message, try again later!";e.addEventListener("submit",async function(o){if(o.preventDefault(),o.stopPropagation(),e.classList.add("was-validated"),e.checkValidity()){const f=new FormData(o.target);fetch(o.target.action,{method:e.method,body:f,headers:{Accept:"application/json"}}).then(t=>{t.ok?b():t.json().then(n=>{Object.hasOwn(n,"errors")?(s.classList.add(i),s.innerHTML=n.errors.map(c=>c.message).join(", ")):l(n)})}).catch(t=>l(t))}});const b=()=>{s.innerHTML=a,s.classList.remove(i),s.classList.add(h),d.forEach(o=>{o.setAttribute("readonly",""),o.classList.add("is-valid")}),e.querySelector("button").disabled=!0},l=o=>{s.classList.add(i),s.innerHTML=u,console.error(o)}}})();
