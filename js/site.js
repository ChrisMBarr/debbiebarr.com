(()=>{const S=document.querySelector("body"),h=document.querySelector("#toggle-sidebar"),L=document.querySelector("#sidebar"),v=document.querySelector("#close-sidebar"),y=Array.from(document.querySelectorAll("#sidebar a, #sidebar button")),k=document.querySelector("#sidebar-backdrop"),b=location.pathname.toLowerCase().trim();y.forEach(e=>e.tabIndex=-1);let r=!1;function f(){S.classList.toggle("sidebar-open",r),r?L.focus():document.activeElement.blur(),y.forEach(e=>e.tabIndex=r?0:-1)}function m(e){e.preventDefault(),r=!1,f()}if(document.body.addEventListener("keyup",e=>{r&&e.key==="Escape"&&(r=!1,f())},!1),h.addEventListener("click",e=>{e.preventDefault(),r=!r,f()},!1),v.addEventListener("click",m,!1),k.addEventListener("click",m,!1),k.addEventListener("touchstart",m,!1),!b.includes("books-for-caregivers")&&/\/books\/.+$/i.test(b)){const p=document.querySelector("#book-details-wrapper"),o=document.querySelector("#book-details-titles"),g=document.querySelector("#book-details-links"),a=document.querySelector("#book-details-content > .sub-navigation"),i=a.querySelectorAll("a"),l=()=>{const s=300-(parseInt(getComputedStyle(p).paddingTop,10)+o.offsetHeight);g.style.marginTop=`${s}px`},d=()=>{a.style.setProperty("--book-details-subnav-bg-height",`${a.clientHeight}px`)};let c=null;window.addEventListener("resize",()=>{clearTimeout(c),c=setTimeout(()=>{l(),d()},250)}),l(),d(),i.forEach(t=>{t.addEventListener("click",u=>{u.preventDefault(),i.forEach(n=>{n.classList.remove("current"),document.querySelector(n.getAttribute("href")).classList.add("d-none")}),t.classList.add("current");const s=document.querySelector(t.getAttribute("href"));s.classList.remove("d-none"),s.focus()})})}if(b.includes("/contact")){const e=document.querySelector("#contact-form"),p=e.querySelectorAll("input,textarea"),o=document.querySelector("#form-status"),g="text-success",a="text-danger",i="Thanks for your note. Debbie will respond to you soon.",l="Oops! There was a problem submitting your message, try again later!";e.addEventListener("submit",async function(t){if(t.preventDefault(),t.stopPropagation(),e.classList.add("was-validated"),e.checkValidity()){const u=new FormData(t.target);fetch(t.target.action,{method:e.method,body:u,headers:{Accept:"application/json"}}).then(s=>{s.ok?d():s.json().then(n=>{Object.hasOwn(n,"errors")?(o.classList.add(a),o.innerHTML=n.errors.map(E=>E.message).join(", ")):c(n)})}).catch(s=>c(s))}});const d=()=>{o.innerHTML=i,o.classList.remove(a),o.classList.add(g),p.forEach(t=>{t.setAttribute("readonly",""),t.classList.add("is-valid")}),e.querySelector("button").disabled=!0},c=t=>{o.classList.add(a),o.innerHTML=l,console.error(t)}}})();
